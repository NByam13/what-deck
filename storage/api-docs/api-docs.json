{
    "openapi": "3.0.0",
    "info": {
        "title": "What Deck API",
        "description": "Magic: The Gathering card collection management API",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/api",
            "description": "API Server"
        }
    ],
    "paths": {
        "/cards": {
            "get": {
                "tags": [
                    "Cards"
                ],
                "summary": "List all cards",
                "description": "Get a paginated list of Magic: The Gathering cards with optional filtering",
                "operationId": "e1710b39810207a38a8d9fa5d8ed4407",
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filter cards by type",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Instant"
                        }
                    },
                    {
                        "name": "subtype",
                        "in": "query",
                        "description": "Filter cards by subtype",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Spell"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search cards by title",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Lightning"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/PaginatedResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Card"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Cards"
                ],
                "summary": "Create a new card",
                "description": "Create a new Magic: The Gathering card",
                "operationId": "f2ac6dc4dc4f0cc90f016cbe8b02fb10",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "title",
                                    "type"
                                ],
                                "properties": {
                                    "title": {
                                        "type": "string",
                                        "example": "Lightning Bolt"
                                    },
                                    "image_url": {
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://example.com/cards/lightning-bolt.jpg",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Lightning Bolt deals 3 damage to any target.",
                                        "nullable": true
                                    },
                                    "cost": {
                                        "type": "string",
                                        "example": "{R}",
                                        "nullable": true
                                    },
                                    "type": {
                                        "type": "string",
                                        "example": "Instant"
                                    },
                                    "subtype": {
                                        "type": "string",
                                        "example": "Spell",
                                        "nullable": true
                                    },
                                    "power": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": null,
                                        "nullable": true
                                    },
                                    "toughness": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": null,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Card created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Card"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/cards/{id}": {
            "get": {
                "tags": [
                    "Cards"
                ],
                "summary": "Get a specific card",
                "description": "Retrieve a specific Magic: The Gathering card with its relationships",
                "operationId": "af26c5e68f333f1dfadd1bfa227eb617",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Card"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Cards"
                ],
                "summary": "Update a card",
                "description": "Update an existing Magic: The Gathering card",
                "operationId": "fe7b2d31eb73d88c9c7884acaee234d0",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "title": {
                                        "type": "string",
                                        "example": "Lightning Bolt"
                                    },
                                    "image_url": {
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://example.com/cards/lightning-bolt.jpg",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Lightning Bolt deals 3 damage to any target.",
                                        "nullable": true
                                    },
                                    "cost": {
                                        "type": "string",
                                        "example": "{R}",
                                        "nullable": true
                                    },
                                    "type": {
                                        "type": "string",
                                        "example": "Instant"
                                    },
                                    "subtype": {
                                        "type": "string",
                                        "example": "Spell",
                                        "nullable": true
                                    },
                                    "power": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": null,
                                        "nullable": true
                                    },
                                    "toughness": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "example": null,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Card updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Card"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Cards"
                ],
                "summary": "Delete a card",
                "description": "Delete a Magic: The Gathering card (only if no instances exist)",
                "operationId": "bdb2c37c481aff6ee4b63a61add8471d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Card deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Cannot delete card with existing instances",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/card-instances": {
            "get": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "List all card instances",
                "description": "Get a paginated list of card instances with optional filtering",
                "operationId": "43cb51bad0c2592e94aeb9b6058ec63e",
                "parameters": [
                    {
                        "name": "collection_id",
                        "in": "query",
                        "description": "Filter by collection ID",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "deck_id",
                        "in": "query",
                        "description": "Filter by deck ID",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "available",
                        "in": "query",
                        "description": "Filter available instances (not in deck)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/PaginatedResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/CardInstance"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "Create a new card instance",
                "description": "Create a new physical card instance in a collection",
                "operationId": "20316a63c8e300e426caed664c478b44",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "card_id",
                                    "collection_id"
                                ],
                                "properties": {
                                    "card_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "collection_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "condition": {
                                        "type": "string",
                                        "enum": [
                                            "mint",
                                            "near_mint",
                                            "lightly_played",
                                            "moderately_played",
                                            "heavily_played",
                                            "damaged"
                                        ],
                                        "example": "near_mint"
                                    },
                                    "foil": {
                                        "type": "boolean",
                                        "example": false
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Card instance created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/card-instances/{id}": {
            "get": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "Get a specific card instance",
                "description": "Retrieve a specific card instance with its relationships",
                "operationId": "b76383f8f51b4cd598f3c8098e222af0",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card instance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "Update a card instance",
                "description": "Update an existing card instance (condition, foil status)",
                "operationId": "6bebdc34c1aa1897d2754977edfe3fa3",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "condition": {
                                        "type": "string",
                                        "enum": [
                                            "mint",
                                            "near_mint",
                                            "lightly_played",
                                            "moderately_played",
                                            "heavily_played",
                                            "damaged"
                                        ],
                                        "example": "lightly_played"
                                    },
                                    "foil": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Card instance updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card instance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "Delete a card instance",
                "description": "Delete a physical card instance",
                "operationId": "3805861d14d0653e8969dd247ba08888",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Card instance deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card instance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/card-instances/{cardInstanceId}/move-to-deck/{deckId}": {
            "put": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "Move card instance to deck",
                "description": "Move a card instance to a specific deck",
                "operationId": "35d85c3b86b00151ec0a2c9adc87eafb",
                "parameters": [
                    {
                        "name": "cardInstanceId",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "deckId",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Card instance moved to deck",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Deck and collection must belong to same user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card instance or deck not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/card-instances/{id}/remove-from-deck": {
            "put": {
                "tags": [
                    "Card Instances"
                ],
                "summary": "Remove card instance from deck",
                "description": "Remove a card instance from its current deck",
                "operationId": "a255686d5ca4b47939becb9955060fe4",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Card instance removed from deck",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Card instance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/collections": {
            "get": {
                "tags": [
                    "Collections"
                ],
                "summary": "List all collections",
                "description": "Get a paginated list of card collections",
                "operationId": "7b241eefae469d00143adf95e94029b1",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/PaginatedResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Collection"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Collections"
                ],
                "summary": "Create a new collection",
                "description": "Create a new card collection",
                "operationId": "e22d3436e9fcb5530d8a74cb9f124037",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "user_id",
                                    "name"
                                ],
                                "properties": {
                                    "user_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "My Main Collection"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Collection of rare and valuable cards",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Collection created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Collection"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/collections/{id}": {
            "get": {
                "tags": [
                    "Collections"
                ],
                "summary": "Get a specific collection",
                "description": "Retrieve a specific collection with its relationships",
                "operationId": "5346e26517da2213584c2e3c0ea2798c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Collection ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Collection"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Collections"
                ],
                "summary": "Update a collection",
                "description": "Update an existing collection",
                "operationId": "d353584391ab8d68997dce8bd03fdb14",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Collection ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Updated Collection Name"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Updated description",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Collection updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Collection"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Collections"
                ],
                "summary": "Delete a collection",
                "description": "Delete a collection (only if no card instances exist)",
                "operationId": "32002b244bf5d7d47b4fd5033a6e7414",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Collection ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Collection deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Cannot delete collection with card instances",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/collections/{id}/card-instances": {
            "get": {
                "tags": [
                    "Collections"
                ],
                "summary": "Get collection card instances",
                "description": "Get all card instances in a specific collection",
                "operationId": "5257271b071bf1d15abe7f82c340f1aa",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Collection ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/PaginatedResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/CardInstance"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/decks": {
            "get": {
                "tags": [
                    "Decks"
                ],
                "summary": "List all decks",
                "description": "Get a paginated list of decks with optional filtering",
                "operationId": "d6dfa38dfa422cd427621f3ff77a34a5",
                "parameters": [
                    {
                        "name": "format",
                        "in": "query",
                        "description": "Filter by deck format",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "Standard",
                                "Modern",
                                "Legacy",
                                "Vintage",
                                "Commander",
                                "Pioneer",
                                "Historic",
                                "Pauper",
                                "Limited"
                            ],
                            "example": "Modern"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/PaginatedResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Deck"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Decks"
                ],
                "summary": "Create a new deck",
                "description": "Create a new Magic: The Gathering deck",
                "operationId": "440e1df5188ad208c3ffd34b2d438509",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "user_id",
                                    "name"
                                ],
                                "properties": {
                                    "user_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "Lightning Burn Deck"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Fast aggressive red deck",
                                        "nullable": true
                                    },
                                    "format": {
                                        "type": "string",
                                        "enum": [
                                            "Standard",
                                            "Modern",
                                            "Legacy",
                                            "Vintage",
                                            "Commander",
                                            "Pioneer",
                                            "Historic",
                                            "Pauper",
                                            "Limited"
                                        ],
                                        "example": "Modern",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Deck created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Deck"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/decks/{id}": {
            "get": {
                "tags": [
                    "Decks"
                ],
                "summary": "Get a specific deck",
                "description": "Retrieve a specific deck with its card instances",
                "operationId": "ffa89b4f5b538eb6e647b02d4deb1064",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Deck"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Deck not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Decks"
                ],
                "summary": "Update a deck",
                "description": "Update an existing deck",
                "operationId": "6ebf8cc416e17ae71e4f7a66f04f0959",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Updated Deck Name"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Updated description",
                                        "nullable": true
                                    },
                                    "format": {
                                        "type": "string",
                                        "enum": [
                                            "Standard",
                                            "Modern",
                                            "Legacy",
                                            "Vintage",
                                            "Commander",
                                            "Pioneer",
                                            "Historic",
                                            "Pauper",
                                            "Limited"
                                        ],
                                        "example": "Standard",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Deck updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Deck"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Deck not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Decks"
                ],
                "summary": "Delete a deck",
                "description": "Delete a deck and remove all card instances from it",
                "operationId": "b2f9368943c411c8f9bfe902e985a5d9",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deck deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Deck not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/decks/{id}/card-instances": {
            "get": {
                "tags": [
                    "Decks"
                ],
                "summary": "Get deck card instances",
                "description": "Get all card instances in a specific deck",
                "operationId": "9c745daa6d09560b810474b010356a35",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/PaginatedResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/CardInstance"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Deck not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/decks/{deckId}/add-card-instance/{cardInstanceId}": {
            "post": {
                "tags": [
                    "Decks"
                ],
                "summary": "Add card instance to deck",
                "description": "Add a specific card instance to a deck",
                "operationId": "b3f5a348646dadc71b366ca5c243c552",
                "parameters": [
                    {
                        "name": "deckId",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "cardInstanceId",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Card instance added to deck",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Card instance already assigned to a deck",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Deck and card instance must belong to same user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Deck or card instance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/decks/{deckId}/remove-card-instance/{cardInstanceId}": {
            "delete": {
                "tags": [
                    "Decks"
                ],
                "summary": "Remove card instance from deck",
                "description": "Remove a specific card instance from a deck",
                "operationId": "3140b09674198cec1adaae8d16d09a3c",
                "parameters": [
                    {
                        "name": "deckId",
                        "in": "path",
                        "description": "Deck ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "cardInstanceId",
                        "in": "path",
                        "description": "Card Instance ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Card instance removed from deck",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CardInstance"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Card instance does not belong to this deck",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Deck or card instance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/collections/{id}/import/moxfield": {
            "post": {
                "tags": [
                    "Import"
                ],
                "summary": "Import Moxfield CSV",
                "description": "Import cards from a Moxfield CSV export into a specific collection",
                "operationId": "e9b83a1bc7f6da2d31eb409a1f3909c2",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Collection ID to import cards into",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "csv_file"
                                ],
                                "properties": {
                                    "csv_file": {
                                        "description": "Moxfield CSV export file",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "create_missing_cards": {
                                        "description": "Whether to create new card records for unknown cards",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Import completed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Import completed successfully"
                                        },
                                        "stats": {
                                            "properties": {
                                                "processed": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "cards_created": {
                                                    "type": "integer",
                                                    "example": 75
                                                },
                                                "cards_found": {
                                                    "type": "integer",
                                                    "example": 75
                                                },
                                                "instances_created": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "errors": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "row": {
                                                                "type": "integer",
                                                                "example": 5
                                                            },
                                                            "message": {
                                                                "type": "string",
                                                                "example": "Invalid condition value"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid file or import error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Collection not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/import/formats": {
            "get": {
                "tags": [
                    "Import"
                ],
                "summary": "Get supported import formats",
                "description": "Get list of supported import formats and their requirements",
                "operationId": "b52b8acb8cb6ff8fe7f2c6cc82ce00a6",
                "responses": {
                    "200": {
                        "description": "List of supported import formats",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "formats": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Moxfield"
                                                    },
                                                    "description": {
                                                        "type": "string",
                                                        "example": "Import from Moxfield CSV export"
                                                    },
                                                    "endpoint": {
                                                        "type": "string",
                                                        "example": "/collections/{id}/import/moxfield"
                                                    },
                                                    "required_columns": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        },
                                                        "example": [
                                                            "Count",
                                                            "Name",
                                                            "Edition",
                                                            "Condition",
                                                            "Language",
                                                            "Foil"
                                                        ]
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "PaginatedResponse": {
                "title": "Paginated Response",
                "description": "Standard paginated response format",
                "properties": {
                    "data": {
                        "description": "Array of resource items",
                        "type": "array",
                        "items": {}
                    },
                    "meta": {
                        "properties": {
                            "current_page": {
                                "type": "integer",
                                "example": 1
                            },
                            "last_page": {
                                "type": "integer",
                                "example": 5
                            },
                            "per_page": {
                                "type": "integer",
                                "example": 15
                            },
                            "total": {
                                "type": "integer",
                                "example": 67
                            }
                        },
                        "type": "object"
                    },
                    "links": {
                        "properties": {
                            "first": {
                                "type": "string",
                                "format": "url",
                                "example": "https://api.example.com/cards?page=1"
                            },
                            "last": {
                                "type": "string",
                                "format": "url",
                                "example": "https://api.example.com/cards?page=5"
                            },
                            "prev": {
                                "type": "string",
                                "format": "url",
                                "example": null,
                                "nullable": true
                            },
                            "next": {
                                "type": "string",
                                "format": "url",
                                "example": "https://api.example.com/cards?page=2",
                                "nullable": true
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "ValidationError": {
                "title": "Validation Error Response",
                "description": "Response format for validation errors",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "The given data was invalid."
                    },
                    "errors": {
                        "type": "object",
                        "example": {
                            "title": [
                                "The title field is required."
                            ],
                            "type": [
                                "The type field is required."
                            ]
                        },
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "type": "object"
            },
            "ErrorResponse": {
                "title": "Error Response",
                "description": "Standard error response format",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Resource not found"
                    },
                    "errors": {
                        "type": "object",
                        "example": {
                            "card": [
                                "This card has existing instances and cannot be deleted"
                            ]
                        },
                        "nullable": true,
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "type": "object"
            },
            "SuccessResponse": {
                "title": "Success Response",
                "description": "Standard success response format",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Operation completed successfully"
                    }
                },
                "type": "object"
            },
            "CardInstance": {
                "title": "Card Instance Resource",
                "description": "Individual physical card instance resource representation",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "card_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "collection_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "deck_id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "condition": {
                        "type": "string",
                        "enum": [
                            "mint",
                            "near_mint",
                            "lightly_played",
                            "moderately_played",
                            "heavily_played",
                            "damaged"
                        ],
                        "example": "near_mint"
                    },
                    "foil": {
                        "type": "boolean",
                        "example": false
                    },
                    "language": {
                        "type": "string",
                        "example": "English"
                    },
                    "tags": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "red",
                            "burn",
                            "instant"
                        ],
                        "nullable": true
                    },
                    "purchase_price": {
                        "type": "number",
                        "format": "float",
                        "example": 12.5,
                        "nullable": true
                    },
                    "alter": {
                        "type": "boolean",
                        "example": false
                    },
                    "proxy": {
                        "type": "boolean",
                        "example": false
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "card": {
                        "$ref": "#/components/schemas/Card"
                    },
                    "collection": {
                        "$ref": "#/components/schemas/Collection"
                    },
                    "deck": {
                        "$ref": "#/components/schemas/Deck"
                    },
                    "is_in_deck": {
                        "description": "Whether this instance is assigned to a deck",
                        "type": "boolean",
                        "example": true
                    },
                    "is_available": {
                        "description": "Whether this instance is available (not in a deck)",
                        "type": "boolean",
                        "example": false
                    },
                    "condition_description": {
                        "description": "Human-readable condition description",
                        "type": "string",
                        "example": "Near Mint (NM)"
                    }
                },
                "type": "object"
            },
            "Card": {
                "title": "Card Resource",
                "description": "Magic: The Gathering card resource",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "title": {
                        "type": "string",
                        "example": "Lightning Bolt"
                    },
                    "image_url": {
                        "type": "string",
                        "format": "url",
                        "example": "https://example.com/cards/lightning-bolt.jpg",
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "example": "Lightning Bolt deals 3 damage to any target.",
                        "nullable": true
                    },
                    "cost": {
                        "type": "string",
                        "example": "{R}",
                        "nullable": true
                    },
                    "type": {
                        "type": "string",
                        "example": "Instant"
                    },
                    "subtype": {
                        "type": "string",
                        "example": "Spell",
                        "nullable": true
                    },
                    "power": {
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    },
                    "toughness": {
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    },
                    "edition": {
                        "type": "string",
                        "example": "dft",
                        "nullable": true
                    },
                    "collector_number": {
                        "type": "string",
                        "example": "187",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "card_instances": {
                        "description": "Card instances (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CardInstance"
                        }
                    },
                    "collections": {
                        "description": "Collections containing this card (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Collection"
                        }
                    },
                    "decks": {
                        "description": "Decks containing this card (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Deck"
                        }
                    },
                    "total_instances": {
                        "description": "Total number of instances of this card",
                        "type": "integer",
                        "example": 5
                    },
                    "instances_in_decks": {
                        "description": "Number of instances currently in decks",
                        "type": "integer",
                        "example": 2
                    },
                    "available_instances": {
                        "description": "Number of instances not in decks",
                        "type": "integer",
                        "example": 3
                    }
                },
                "type": "object"
            },
            "Collection": {
                "title": "Collection Resource",
                "description": "Card collection resource representation",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "My Main Collection"
                    },
                    "description": {
                        "type": "string",
                        "example": "Collection of rare and valuable cards",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    },
                    "card_instances": {
                        "description": "Card instances in this collection (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CardInstance"
                        }
                    },
                    "total_card_instances": {
                        "description": "Total number of card instances in collection",
                        "type": "integer",
                        "example": 150
                    },
                    "cards_in_decks": {
                        "description": "Number of cards currently assigned to decks",
                        "type": "integer",
                        "example": 60
                    },
                    "available_cards": {
                        "description": "Number of cards not assigned to decks",
                        "type": "integer",
                        "example": 90
                    },
                    "unique_cards": {
                        "description": "Number of unique card types in collection",
                        "type": "integer",
                        "example": 75
                    }
                },
                "type": "object"
            },
            "Deck": {
                "title": "Deck Resource",
                "description": "Magic: The Gathering deck resource representation",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Lightning Burn Deck"
                    },
                    "description": {
                        "type": "string",
                        "example": "Fast aggressive red deck focused on direct damage",
                        "nullable": true
                    },
                    "format": {
                        "type": "string",
                        "enum": [
                            "Standard",
                            "Modern",
                            "Legacy",
                            "Vintage",
                            "Commander",
                            "Pioneer",
                            "Historic",
                            "Pauper",
                            "Limited"
                        ],
                        "example": "Modern",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    },
                    "card_instances": {
                        "description": "Card instances in this deck (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CardInstance"
                        }
                    },
                    "total_cards": {
                        "description": "Total number of cards in deck",
                        "type": "integer",
                        "example": 60
                    },
                    "unique_cards": {
                        "description": "Number of unique card types in deck",
                        "type": "integer",
                        "example": 25
                    },
                    "card_counts": {
                        "description": "Detailed card counts and conditions (only when card instances are loaded)",
                        "type": "array",
                        "items": {
                            "properties": {
                                "card_id": {
                                    "type": "integer",
                                    "example": 1
                                },
                                "card_title": {
                                    "type": "string",
                                    "example": "Lightning Bolt"
                                },
                                "quantity": {
                                    "type": "integer",
                                    "example": 4
                                },
                                "conditions": {
                                    "type": "object",
                                    "example": {
                                        "near_mint": 3,
                                        "lightly_played": 1
                                    },
                                    "additionalProperties": {
                                        "type": "integer"
                                    }
                                },
                                "foil_count": {
                                    "type": "integer",
                                    "example": 1
                                },
                                "non_foil_count": {
                                    "type": "integer",
                                    "example": 3
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "User": {
                "title": "User Resource",
                "description": "User resource representation",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "John Doe"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "john@example.com"
                    },
                    "email_verified_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-01T12:00:00.000000Z"
                    },
                    "collections": {
                        "description": "User collections (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Collection"
                        }
                    },
                    "decks": {
                        "description": "User decks (only when relationship is loaded)",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Deck"
                        }
                    },
                    "total_collections": {
                        "description": "Total number of collections owned by user",
                        "type": "integer",
                        "example": 3
                    },
                    "total_decks": {
                        "description": "Total number of decks owned by user",
                        "type": "integer",
                        "example": 5
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "Cards",
            "description": "Magic: The Gathering card management"
        },
        {
            "name": "Card Instances",
            "description": "Individual physical card instance management"
        },
        {
            "name": "Collections",
            "description": "Card collection management"
        },
        {
            "name": "Decks",
            "description": "Magic: The Gathering deck management"
        },
        {
            "name": "Import",
            "description": "Card collection import operations"
        }
    ]
}